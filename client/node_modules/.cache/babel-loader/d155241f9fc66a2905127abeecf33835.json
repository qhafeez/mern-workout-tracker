{"ast":null,"code":"import _classCallCheck from \"/Users/qhafeez26/mern-workout/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/qhafeez26/mern-workout/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/qhafeez26/mern-workout/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/qhafeez26/mern-workout/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/qhafeez26/mern-workout/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/qhafeez26/mern-workout/client/src/HOC/withErrorHandler/withErrorHandler.js\";\nimport React, { Component } from \"react\";\nimport Modal from \"../../Components/UI/Modal/Modal\";\nimport Aux from \"../Aux/Aux\";\n\nvar withErrorHandler = function withErrorHandler(WrappedComponent, axios) {\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(_class2, _Component);\n\n      function _class2() {\n        var _getPrototypeOf2;\n\n        var _this;\n\n        _classCallCheck(this, _class2);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(_class2)).call.apply(_getPrototypeOf2, [this].concat(args)));\n        _this.state = {\n          error: null\n        };\n\n        _this.errorConfirmedHandler = function () {\n          _this.setState({\n            error: null\n          }); //setting the error to null will close the modal\n          //since the error state gets passed as the prop \"show\" which\n          //then gets passed to the backdrop component where it's true or false\n          //value decides whether the backdrop is shown or not\n\n        };\n\n        return _this;\n      }\n\n      _createClass(_class2, [{\n        key: \"componentWillMount\",\n        value: function componentWillMount() {\n          var _this2 = this;\n\n          this.requestInterceptor = axios.interceptors.request.use(function (request) {\n            _this2.setState({\n              error: null\n            });\n\n            return request;\n          });\n          this.responseInterceptor = axios.interceptors.response.use(function (res) {\n            return res;\n          }, function (error) {\n            console.log(error);\n\n            _this2.setState({\n              error: error\n            });\n          });\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          console.log(WrappedComponent.name + \" [Will Unmount] \", this.requestInterceptor, this.responseInterceptor);\n          axios.interceptors.request.eject(this.requestInterceptor);\n          axios.interceptors.response.eject(this.responseInterceptor);\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          return React.createElement(Aux, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 60\n            },\n            __self: this\n          }, React.createElement(Modal, {\n            show: this.state.error,\n            modalClosed: this.errorConfirmedHandler,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61\n            },\n            __self: this\n          }, this.state.error ? this.state.error.message : null), React.createElement(WrappedComponent, Object.assign({}, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64\n            },\n            __self: this\n          })));\n        }\n      }]);\n\n      return _class2;\n    }(Component)\n  );\n};\n\nexport default withErrorHandler;","map":{"version":3,"sources":["/Users/qhafeez26/mern-workout/client/src/HOC/withErrorHandler/withErrorHandler.js"],"names":["React","Component","Modal","Aux","withErrorHandler","WrappedComponent","axios","state","error","errorConfirmedHandler","setState","requestInterceptor","interceptors","request","use","responseInterceptor","response","res","console","log","name","eject","message","props"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,iCAAlB;AACA,OAAOC,GAAP,MAAgB,YAAhB;;AAIA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,gBAAD,EAAmBC,KAAnB,EAA6B;AAErD;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,cAECC,KAFD,GAES;AAEPC,UAAAA,KAAK,EAAE;AAFA,SAFT;;AAAA,cAsCCC,qBAtCD,GAsCwB,YAAK;AAE3B,gBAAKC,QAAL,CAAc;AAACF,YAAAA,KAAK,EAAC;AAAP,WAAd,EAF2B,CAG3B;AACA;AACA;AACA;;AAEA,SA9CF;;AAAA;AAAA;;AAAA;AAAA;AAAA,6CAQqB;AAAA;;AAGnB,eAAKG,kBAAL,GAA0BL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAD,OAAO,EAAI;AAEnE,YAAA,MAAI,CAACH,QAAL,CAAc;AAACF,cAAAA,KAAK,EAAE;AAAR,aAAd;;AACA,mBAAOK,OAAP;AAEA,WALyB,CAA1B;AAQA,eAAKE,mBAAL,GAA2BT,KAAK,CAACM,YAAN,CAAmBI,QAAnB,CAA4BF,GAA5B,CAAgC,UAAAG,GAAG;AAAA,mBAAIA,GAAJ;AAAA,WAAnC,EAA4C,UAAAT,KAAK,EAAI;AAG/EU,YAAAA,OAAO,CAACC,GAAR,CAAYX,KAAZ;;AACA,YAAA,MAAI,CAACE,QAAL,CAAc;AAACF,cAAAA,KAAK,EAAEA;AAAR,aAAd;AAGA,WAP0B,CAA3B;AASA;AA5BF;AAAA;AAAA,+CA8BuB;AACrBU,UAAAA,OAAO,CAACC,GAAR,CAAYd,gBAAgB,CAACe,IAAjB,GAAuB,kBAAnC,EAAuD,KAAKT,kBAA5D,EAAgF,KAAKI,mBAArF;AACAT,UAAAA,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BQ,KAA3B,CAAiC,KAAKV,kBAAtC;AACAL,UAAAA,KAAK,CAACM,YAAN,CAAmBI,QAAnB,CAA4BK,KAA5B,CAAkC,KAAKN,mBAAvC;AAEA;AAnCF;AAAA;AAAA,iCAgDS;AACP,iBAEA,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACC,oBAAC,KAAD;AAAO,YAAA,IAAI,EAAE,KAAKR,KAAL,CAAWC,KAAxB;AAA+B,YAAA,WAAW,EAAE,KAAKC,qBAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,KAAKF,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWC,KAAX,CAAiBc,OAApC,GAA6C,IAD/C,CADD,EAIC,oBAAC,gBAAD,oBAAsB,KAAKC,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAJD,CAFA;AASA;AA1DF;;AAAA;AAAA,MAAqBtB,SAArB;AAAA;AA+DA,CAjED;;AAmEA,eAAeG,gBAAf","sourcesContent":["import React, {Component} from \"react\";\nimport Modal from \"../../Components/UI/Modal/Modal\";\nimport Aux from \"../Aux/Aux\";\n\n\n\nconst withErrorHandler = (WrappedComponent, axios) => {\n\n\treturn class extends Component { \n\n\t\tstate = {\n\n\t\t\terror: null,\n\n\t\t}\n\n\t\tcomponentWillMount(){\n\n\n\t\t\tthis.requestInterceptor = axios.interceptors.request.use(request => {\n\n\t\t\t\tthis.setState({error: null});\n\t\t\t\treturn request;\n\n\t\t\t});\n\n\n\t\t\tthis.responseInterceptor = axios.interceptors.response.use(res => res, error => {\n\n\n\t\t\t\tconsole.log(error);\n\t\t\t\tthis.setState({error: error});\n\n\n\t\t\t});\n\n\t\t}\n\n\t\tcomponentWillUnmount(){\n\t\t\tconsole.log(WrappedComponent.name+ \" [Will Unmount] \", this.requestInterceptor, this.responseInterceptor);\n\t\t\taxios.interceptors.request.eject(this.requestInterceptor);\n\t\t\taxios.interceptors.response.eject(this.responseInterceptor);\n\n\t\t}\n\n\n\t\terrorConfirmedHandler =() =>{\n\n\t\t\tthis.setState({error:null});\n\t\t\t//setting the error to null will close the modal\n\t\t\t//since the error state gets passed as the prop \"show\" which\n\t\t\t//then gets passed to the backdrop component where it's true or false\n\t\t\t//value decides whether the backdrop is shown or not\n\n\t\t}\n\n\t\trender(){\n\t\t\treturn (\n\n\t\t\t<Aux>\t\t\n\t\t\t\t<Modal show={this.state.error} modalClosed={this.errorConfirmedHandler}>\n\t\t\t\t\t{this.state.error ? this.state.error.message :null}\n\t\t\t\t</Modal>\n\t\t\t\t<WrappedComponent {...this.props} />\n\t\t\t</Aux>\t\n\t\t\t\t);\n\t\t}\n\n\t}\n\n\n}\n\nexport default withErrorHandler;"]},"metadata":{},"sourceType":"module"}