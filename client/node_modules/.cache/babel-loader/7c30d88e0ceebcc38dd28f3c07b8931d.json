{"ast":null,"code":"import _classCallCheck from \"/Users/qhafeez26/mern-workout/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/qhafeez26/mern-workout/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/qhafeez26/mern-workout/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/qhafeez26/mern-workout/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/qhafeez26/mern-workout/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/qhafeez26/mern-workout/client/src/Containers/History/History.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport classes from \"./History.module.css\";\nimport Spinner from \"../../Components/UI/Spinner/Spinner\";\nimport HistoryPageComponent from \"../../Components/HistoryPageComponent/HistoryPageComponent\"; // import CompletedWorkout from  \"../../Components/CompletedWorkout/CompletedWorkout\";\n// import logic from \"jw-paginate\";\n\nimport Pagination from \"jw-react-pagination\";\nimport * as actions from \"../../store/actions/index.js\";\nimport Aux from \"../../HOC/Aux/Aux\";\nimport CompletedWorkoutDisplay from \"../../Components/CompletedWorkoutDisplay/CompletedWorkoutDisplay\";\nimport { Route, Link } from \"react-router-dom\"; // import firebase from \"../../fire.js\";\n\nvar History =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(History, _Component);\n\n  function History() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, History);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(History)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      completedWorkouts: null,\n      pageOfItems: []\n    };\n\n    _this.onChangePage = function (pageOfItems) {\n      _this.setState({\n        pageOfItems: pageOfItems\n      });\n    };\n\n    _this.deleteWorkout = function (workoutId) {\n      _this.props.deleteWorkout(workoutId, _this.props.token);\n    };\n\n    return _this;\n  }\n\n  _createClass(History, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.fetchHistory(this.props.token);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      console.log(\"HISTORY CDU\");\n\n      if (this.props.completedWorkouts !== null) {\n        if (prevState.completedWorkouts !== this.props.completedWorkouts) {\n          console.log(\"HISTORY CDU ONE\");\n          this.setState({\n            completedWorkouts: this.props.completedWorkouts\n          });\n        }\n      } // \tif(this.props.completedWorkouts !== null){\n      // \tif(prevProps.completedWorkouts !== this.props.completedWorkouts)\n      // this.setState({\n      // \tcompletedWorkouts:this.props.completedWorkouts\n      // })\n      // }\n\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var currentWorkouts = React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      });\n\n      if (this.props.completedWorkouts !== null) {\n        if (this.state.completedWorkouts) {\n          currentWorkouts = this.state.pageOfItems.map(function (exerList) {\n            var url = \"/history/\" + exerList.workoutId; // return <Link to={url}><CompletedWorkout month={exerList.date.month} \n            // \t\t\t\t\t\t day={exerList.date.day} \n            // \t\t\t\t\t\t year={exerList.date.year}  \n            // \t\t\t\t\t\t workout={exerList.workout}\n            // \t\t\t\t\t\t path={exerList.key}\n            // \t\t\t\t\t\t workoutId={exerList.workoutId}\n            // \t\t\t\t\t\t clicked={()=>{this.deleteWorkout(exerList.workoutId)}} \n            // \t\t\t\t\t\t /></Link>\n\n            return React.createElement(Link, {\n              to: url,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 121\n              },\n              __self: this\n            }, React.createElement(HistoryPageComponent, {\n              month: exerList.date.month,\n              day: exerList.date.day,\n              year: exerList.date.year,\n              numExercises: exerList.workout.length,\n              workoutId: exerList.workoutId,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 121\n              },\n              __self: this\n            })); // Object.keys(exerList.workout).map(indExer=>{\n            // \treturn <div>exerList.workout[indExer].exercise</div>\n            // })\n          });\n        }\n      } else {\n        currentWorkouts = \"You have no completed workouts\";\n      }\n\n      console.log(this.props.completedWorkouts);\n      return React.createElement(Aux, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.mainContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.historyContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Workout History\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Tap to reveal\")), currentWorkouts, React.createElement(Route, {\n        path: \"/history/:id\",\n        exact: true,\n        component: CompletedWorkoutDisplay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: classes.paginationContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        items: this.state.completedWorkouts,\n        onChangePage: this.onChangePage,\n        pageSize: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return History;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    token: state.auth.token,\n    completedWorkouts: state.workout.workoutHistory,\n    userId: state.auth.userId\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchHistory: function fetchHistory(token) {\n      dispatch(actions.fetchWorkoutHistory(token));\n    },\n    deleteWorkout: function deleteWorkout(workoutId, token) {\n      dispatch(actions.deleteWorkout(workoutId, token));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(History);","map":{"version":3,"sources":["/Users/qhafeez26/mern-workout/client/src/Containers/History/History.js"],"names":["React","Component","connect","classes","Spinner","HistoryPageComponent","Pagination","actions","Aux","CompletedWorkoutDisplay","Route","Link","History","state","completedWorkouts","pageOfItems","onChangePage","setState","deleteWorkout","workoutId","props","token","fetchHistory","prevProps","prevState","console","log","currentWorkouts","map","exerList","url","date","month","day","year","workout","length","mainContainer","historyContainer","title","paginationContainer","mapStateToProps","auth","workoutHistory","userId","mapDispatchToProps","dispatch","fetchWorkoutHistory"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {connect} from \"react-redux\";\nimport classes from \"./History.module.css\";\nimport Spinner from  \"../../Components/UI/Spinner/Spinner\";\nimport HistoryPageComponent from \"../../Components/HistoryPageComponent/HistoryPageComponent\";\n// import CompletedWorkout from  \"../../Components/CompletedWorkout/CompletedWorkout\";\n// import logic from \"jw-paginate\";\nimport Pagination from \"jw-react-pagination\";\nimport * as actions from \"../../store/actions/index.js\";\nimport Aux from \"../../HOC/Aux/Aux\";\nimport CompletedWorkoutDisplay from \"../../Components/CompletedWorkoutDisplay/CompletedWorkoutDisplay\";\nimport {Route, Link} from \"react-router-dom\";\n\n// import firebase from \"../../fire.js\";\n\nclass History extends Component {\n\ncomponentDidMount(){\n\n\tthis.props.fetchHistory(this.props.token);\n\n}\n\n\ncomponentDidUpdate(prevProps, prevState){\n\n\tconsole.log(\"HISTORY CDU\")\n\tif(this.props.completedWorkouts !== null){\n\n\t\tif(prevState.completedWorkouts !== this.props.completedWorkouts){\n\n\n\n\t\t\tconsole.log(\"HISTORY CDU ONE\")\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tcompletedWorkouts:this.props.completedWorkouts\n\t\t\t\t})\n\t\t\t\n\t\t}\n\t}\n\n// \tif(this.props.completedWorkouts !== null){\n\n// \tif(prevProps.completedWorkouts !== this.props.completedWorkouts)\n// this.setState({\n// \tcompletedWorkouts:this.props.completedWorkouts\n// })\n\n// }\n\n}\n\n\n\nstate={\n\n\tcompletedWorkouts:null,\n\tpageOfItems:[]\n\n}\n\n\n\nonChangePage = (pageOfItems) =>{\n\n\tthis.setState({\n\n\t\tpageOfItems:pageOfItems\n\t\t\n\n\t})\n\n\n}\n\ndeleteWorkout=(workoutId)=>{\n\n\tthis.props.deleteWorkout(workoutId, this.props.token)\n\n}\n\n\n\n\n\n\n\nrender(){\n\n\n\t\tlet currentWorkouts = <Spinner />;\n\t\tif(this.props.completedWorkouts !== null ){\n\n\n\n\n\n\t\t\n\n\t\tif(this.state.completedWorkouts){\n\n\n\n\n\t\t\tcurrentWorkouts = this.state.pageOfItems.map(exerList =>{\n\n\t\t\t\t\n\t\t\t\tlet url = \"/history/\" + exerList.workoutId;\n\n\n\t\t\t\t// return <Link to={url}><CompletedWorkout month={exerList.date.month} \n\t\t\t\t// \t\t\t\t\t\t day={exerList.date.day} \n\t\t\t\t// \t\t\t\t\t\t year={exerList.date.year}  \n\t\t\t\t// \t\t\t\t\t\t workout={exerList.workout}\n\t\t\t\t// \t\t\t\t\t\t path={exerList.key}\n\t\t\t\t// \t\t\t\t\t\t workoutId={exerList.workoutId}\n\t\t\t\t// \t\t\t\t\t\t clicked={()=>{this.deleteWorkout(exerList.workoutId)}} \n\t\t\t\t// \t\t\t\t\t\t /></Link>\n\n\t\t\t\treturn <Link to={url}><HistoryPageComponent \n\t\t\t\t\t\t\t\t\t\tmonth={exerList.date.month} \n\t\t\t\t\t\t\t\t\t\t day={exerList.date.day} \n\t\t\t\t\t\t\t\t\t\t year={exerList.date.year}  \n\t\t\t\t\t\t\t\t\t\t numExercises={exerList.workout.length}\n\t\t\t\t\t\t\t\t\t\t workoutId={exerList.workoutId}\n\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t\t /></Link>\t\t\t\t\t\t\t\t\t\t \n\t\t\n\t\t\t\t\t// Object.keys(exerList.workout).map(indExer=>{\n\n\t\t\t\t\t// \treturn <div>exerList.workout[indExer].exercise</div>\n\n\t\t\t\t\t// })\n\n\n\n\n\t\t\t});\n\n\n\n\n\t\t}\n\t} else {\n\t\tcurrentWorkouts = \"You have no completed workouts\";\n\t}\n\n\nconsole.log(this.props.completedWorkouts);\n\n\treturn(\n\t\t\t<Aux>\n\t\t\t\t<div className={classes.mainContainer}>\n\t\t\t\t\t<div className={classes.historyContainer}>\n\t\t\t\t\t\t<div className={classes.title}>\n\t\t\t\t\t\t\t\t<div>Workout History</div>\n\t\t\t\t\t\t\t\t<div>Tap to reveal</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{currentWorkouts}\n\t\t\t\t\t\t<Route path=\"/history/:id\" exact component={CompletedWorkoutDisplay}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div className={classes.paginationContainer}>\n\t\t\t\t\t\t<Pagination items={this.state.completedWorkouts} onChangePage={this.onChangePage} pageSize={5} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Aux>\n\t\t)\n\n\n}\n\n\n\n\n}\n\n\nconst mapStateToProps = state =>{\n\n\treturn{\n\t\ttoken:state.auth.token,\n\t\tcompletedWorkouts:state.workout.workoutHistory,\n\t\tuserId: state.auth.userId\n\n\t}\n\n}\n\nconst mapDispatchToProps = dispatch =>{\n\n\treturn{\n\n\t\tfetchHistory:(token)=>{dispatch(actions.fetchWorkoutHistory(token))},\n\t\tdeleteWorkout:(workoutId,token)=>{dispatch(actions.deleteWorkout(workoutId,token))}\n\n\t}\n\n}\n\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(History);"]},"metadata":{},"sourceType":"module"}